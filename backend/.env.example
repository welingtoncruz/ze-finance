# =============================================================================
# ZEFA FINANCE - Backend Environment Variables
# =============================================================================
# Copy to .env and adjust. Defaults are for LOCAL DEV (Docker Postgres on 5433).
# For PRODUCTION: configure in GCP Cloud Run + Secret Manager (see deploy plan).
# =============================================================================

# -----------------------------------------------------------------------------
# LOCAL DEV (default) - Docker Compose: docker compose up -d db
# -----------------------------------------------------------------------------

# SQLAlchemy connection - use postgresql+asyncpg:// for async
DATABASE_URL=postgresql+asyncpg://postgres:postgres_password@localhost:5433/zefa_db

# JWT - use strong secret in production (e.g. openssl rand -hex 32)
SECRET_KEY=dev-secret-key-change-in-production

# CORS - JSON array of allowed origins
ALLOWED_ORIGINS=["http://localhost:3000"]

# -----------------------------------------------------------------------------
# App config (optional - defaults below)
# -----------------------------------------------------------------------------
ACCESS_TOKEN_EXPIRE_MINUTES=30
ALGORITHM=HS256

# -----------------------------------------------------------------------------
# AI Chat (Zefa) - optional, can also use /chat/api-key for ephemeral keys
# -----------------------------------------------------------------------------
AI_PROVIDER=openai
AI_MODEL_CHAT=gpt-4o-mini
AI_MAX_CONTEXT_MESSAGES=20
AI_SUMMARY_TOKEN_BUDGET=500
AI_MAX_OUTPUT_TOKENS=1500
AI_TOOLS_MODE=heuristic
AI_TOOL_RESULTS_MAX_CHARS=4000
AI_CONTEXT_PACK_TX_LIMIT=6

# API keys - set one for your chosen provider (or use ephemeral via /chat/api-key)
OPENAI_API_KEY=
# GEMINI_API_KEY=
# ANTHROPIC_API_KEY=

# -----------------------------------------------------------------------------
# PRODUCTION overrides (when deploying to Cloud Run)
# -----------------------------------------------------------------------------
# DATABASE_URL    -> Neon pooled: postgresql+asyncpg://user:pass@ep-xxx-pooler.region.aws.neon.tech/neondb?ssl=require
# SECRET_KEY      -> Generate: openssl rand -hex 32
# ALLOWED_ORIGINS -> ["https://your-app.vercel.app"]
# OPENAI_API_KEY  -> Your OpenAI key (or GEMINI_API_KEY / ANTHROPIC_API_KEY)
# Configure in: GCP Secret Manager (sensitive) + Cloud Run Variables (non-sensitive)
